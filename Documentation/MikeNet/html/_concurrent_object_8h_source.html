<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DarkNet: C:/Users/Michael Pryor/Documents/Programming 09/MikeNet/Project/MikeNet/ConcurrentObject.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>C:/Users/Michael Pryor/Documents/Programming 09/MikeNet/Project/MikeNet/ConcurrentObject.h</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#pragma once</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#include &quot;ConcurrencyControl.h&quot;</span>
<a name="l00003"></a>00003 
<a name="l00004"></a>00004 DWORD WINAPI ConcurrentObjectTestFunction(LPVOID lpParameter);
<a name="l00005"></a>00005 
<a name="l00010"></a>00010 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;      
<a name="l00011"></a><a class="code" href="class_concurrent_object.html">00011</a> <span class="keyword">class </span><a class="code" href="class_concurrent_object.html" title="Uses CriticalSection to safely control access to an object.">ConcurrentObject</a>: <span class="keyword">public</span> <a class="code" href="class_critical_section.html" title="Critical section class with Enter and Leave methods.">CriticalSection</a>
<a name="l00012"></a>00012 {
<a name="l00014"></a><a class="code" href="class_concurrent_object.html#a4ad66e44437b84b0ec7fd9d479a8300f">00014</a>         T <a class="code" href="class_concurrent_object.html#a4ad66e44437b84b0ec7fd9d479a8300f" title="Object that is protected by critical section.">object</a>;
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="keyword">public</span>:
<a name="l00020"></a><a class="code" href="class_concurrent_object.html#a0844cee0168d4803e20ab2ccebb7c4b2">00020</a>         <a class="code" href="class_concurrent_object.html#a0844cee0168d4803e20ab2ccebb7c4b2" title="Constructor.">ConcurrentObject</a>() : <a class="code" href="class_critical_section.html" title="Critical section class with Enter and Leave methods.">CriticalSection</a>()
<a name="l00021"></a>00021         {
<a name="l00022"></a>00022 
<a name="l00023"></a>00023         }
<a name="l00024"></a>00024 
<a name="l00030"></a><a class="code" href="class_concurrent_object.html#ade6d44385e7617576495c2eb6086b55e">00030</a>         <a class="code" href="class_concurrent_object.html#a0844cee0168d4803e20ab2ccebb7c4b2" title="Constructor.">ConcurrentObject</a>(T paraObject) : <a class="code" href="class_critical_section.html" title="Critical section class with Enter and Leave methods.">CriticalSection</a>(), <a class="code" href="class_concurrent_object.html#a4ad66e44437b84b0ec7fd9d479a8300f" title="Object that is protected by critical section.">object</a>(paraObject)
<a name="l00031"></a>00031         {
<a name="l00032"></a>00032 
<a name="l00033"></a>00033         }
<a name="l00034"></a>00034 
<a name="l00040"></a><a class="code" href="class_concurrent_object.html#a475bcece2dc474e030fb06fef911d49e">00040</a>         <a class="code" href="class_concurrent_object.html#a0844cee0168d4803e20ab2ccebb7c4b2" title="Constructor.">ConcurrentObject</a>(<span class="keyword">const</span> T * paraObject) : <a class="code" href="class_critical_section.html" title="Critical section class with Enter and Leave methods.">CriticalSection</a>(), <a class="code" href="class_concurrent_object.html#a4ad66e44437b84b0ec7fd9d479a8300f" title="Object that is protected by critical section.">object</a>(*paraObject)
<a name="l00041"></a>00041         {
<a name="l00042"></a>00042                 
<a name="l00043"></a>00043         }
<a name="l00044"></a>00044 
<a name="l00050"></a><a class="code" href="class_concurrent_object.html#a115032e2d183d4de597e5255a7b487ad">00050</a>         <a class="code" href="class_concurrent_object.html#a0844cee0168d4803e20ab2ccebb7c4b2" title="Constructor.">ConcurrentObject</a>(<span class="keyword">const</span> <a class="code" href="class_concurrent_object.html" title="Uses CriticalSection to safely control access to an object.">ConcurrentObject&lt;T&gt;</a> &amp; copyMe) : <a class="code" href="class_critical_section.html" title="Critical section class with Enter and Leave methods.">CriticalSection</a>(), <a class="code" href="class_concurrent_object.html#a4ad66e44437b84b0ec7fd9d479a8300f" title="Object that is protected by critical section.">object</a>(copyMe.<a class="code" href="class_concurrent_object.html#a4ad66e44437b84b0ec7fd9d479a8300f" title="Object that is protected by critical section.">object</a>)
<a name="l00051"></a>00051         {
<a name="l00052"></a>00052 
<a name="l00053"></a>00053         }
<a name="l00054"></a>00054 
<a name="l00062"></a><a class="code" href="class_concurrent_object.html#a0fbeab9f9c0f547d9da63ad1fef1b38e">00062</a>         <a class="code" href="class_concurrent_object.html" title="Uses CriticalSection to safely control access to an object.">ConcurrentObject</a> &amp; <a class="code" href="class_concurrent_object.html#a0fbeab9f9c0f547d9da63ad1fef1b38e" title="Assignment operator.">operator= </a>(T copyMe)
<a name="l00063"></a>00063         {
<a name="l00064"></a>00064                 <a class="code" href="class_concurrent_object.html#ae968d8f2bb78e19102ca57138416a91f" title="Changes contents of protected object, by copying data from a dereferenced pointer.">SetB</a>(&amp;copyMe);
<a name="l00065"></a>00065                 <span class="keywordflow">return</span> (*<span class="keyword">this</span>);
<a name="l00066"></a>00066         }
<a name="l00067"></a>00067 
<a name="l00075"></a><a class="code" href="class_concurrent_object.html#a89bc9c97db273c54c642ac2f48249619">00075</a>         <a class="code" href="class_concurrent_object.html" title="Uses CriticalSection to safely control access to an object.">ConcurrentObject</a> &amp; <a class="code" href="class_concurrent_object.html#a0fbeab9f9c0f547d9da63ad1fef1b38e" title="Assignment operator.">operator= </a>(<span class="keyword">const</span> <a class="code" href="class_concurrent_object.html" title="Uses CriticalSection to safely control access to an object.">ConcurrentObject&lt;T&gt;</a> &amp; copyMe)
<a name="l00076"></a>00076         {
<a name="l00077"></a>00077                 copyMe.<a class="code" href="class_critical_section.html#a509be5342b2f07ae06e1af5d9e08b871" title="Take control of critical section.">Enter</a>();
<a name="l00078"></a>00078                         <a class="code" href="class_concurrent_object.html#ae968d8f2bb78e19102ca57138416a91f" title="Changes contents of protected object, by copying data from a dereferenced pointer.">SetB</a>(&amp;copyMe.<a class="code" href="class_concurrent_object.html#a4ad66e44437b84b0ec7fd9d479a8300f" title="Object that is protected by critical section.">object</a>);
<a name="l00079"></a>00079                 copyMe.<a class="code" href="class_critical_section.html#a6fa0931385f066492f31fc98e3fca657" title="Release control of critical section.">Leave</a>();
<a name="l00080"></a>00080                 <span class="keywordflow">return</span> (*<span class="keyword">this</span>);
<a name="l00081"></a>00081         }
<a name="l00082"></a>00082 
<a name="l00090"></a><a class="code" href="class_concurrent_object.html#a503b0dbf490847945d6c60e0f63f357e">00090</a>         <span class="keywordtype">bool</span> <a class="code" href="class_concurrent_object.html#a503b0dbf490847945d6c60e0f63f357e" title="Equality operator.">operator==</a>(<span class="keyword">const</span> <a class="code" href="class_concurrent_object.html" title="Uses CriticalSection to safely control access to an object.">ConcurrentObject&lt;T&gt;</a> &amp; compare)<span class="keyword"> const</span>
<a name="l00091"></a>00091 <span class="keyword">        </span>{
<a name="l00092"></a>00092                 this-&gt;<a class="code" href="class_critical_section.html#a509be5342b2f07ae06e1af5d9e08b871" title="Take control of critical section.">Enter</a>();
<a name="l00093"></a>00093                 compare.<a class="code" href="class_critical_section.html#a509be5342b2f07ae06e1af5d9e08b871" title="Take control of critical section.">Enter</a>();
<a name="l00094"></a>00094                         <span class="keywordtype">bool</span> returnMe = (this-&gt;<span class="keywordtype">object</span> == compare.<a class="code" href="class_concurrent_object.html#a4ad66e44437b84b0ec7fd9d479a8300f" title="Object that is protected by critical section.">object</a>);
<a name="l00095"></a>00095                 compare.<a class="code" href="class_critical_section.html#a6fa0931385f066492f31fc98e3fca657" title="Release control of critical section.">Leave</a>();
<a name="l00096"></a>00096                 this-&gt;<a class="code" href="class_critical_section.html#a6fa0931385f066492f31fc98e3fca657" title="Release control of critical section.">Leave</a>();
<a name="l00097"></a>00097 
<a name="l00098"></a>00098                 <span class="keywordflow">return</span> returnMe;
<a name="l00099"></a>00099         }
<a name="l00100"></a>00100 
<a name="l00108"></a><a class="code" href="class_concurrent_object.html#a2a93ee241db643be0a10a63754dc22de">00108</a>         <span class="keywordtype">bool</span> <a class="code" href="class_concurrent_object.html#a2a93ee241db643be0a10a63754dc22de" title="Inequality operator.">operator!=</a>(<span class="keyword">const</span> <a class="code" href="class_concurrent_object.html" title="Uses CriticalSection to safely control access to an object.">ConcurrentObject&lt;T&gt;</a> &amp; compare)<span class="keyword"> const</span>
<a name="l00109"></a>00109 <span class="keyword">        </span>{
<a name="l00110"></a>00110                 <span class="keywordflow">return</span> !(*<span class="keyword">this</span> == compare);
<a name="l00111"></a>00111         }
<a name="l00112"></a>00112 
<a name="l00118"></a><a class="code" href="class_concurrent_object.html#ae968d8f2bb78e19102ca57138416a91f">00118</a>         <span class="keywordtype">void</span> <a class="code" href="class_concurrent_object.html#ae968d8f2bb78e19102ca57138416a91f" title="Changes contents of protected object, by copying data from a dereferenced pointer.">ConcurrentObject::SetB</a>(<span class="keyword">const</span> T * paraObject)
<a name="l00119"></a>00119         {
<a name="l00120"></a>00120                 <a class="code" href="class_critical_section.html#a509be5342b2f07ae06e1af5d9e08b871" title="Take control of critical section.">Enter</a>();
<a name="l00121"></a>00121                         <span class="keywordtype">object</span> = *paraObject;
<a name="l00122"></a>00122                 <a class="code" href="class_critical_section.html#a6fa0931385f066492f31fc98e3fca657" title="Release control of critical section.">Leave</a>();
<a name="l00123"></a>00123         }
<a name="l00124"></a>00124 
<a name="l00130"></a><a class="code" href="class_concurrent_object.html#afa3d2932ed3b805db27ac22eee4a955d">00130</a>         <span class="keywordtype">void</span> <a class="code" href="class_concurrent_object.html#afa3d2932ed3b805db27ac22eee4a955d" title="Changes contents of protected object, by copying data from a temporary object.">ConcurrentObject::Set</a>(T paraObject)
<a name="l00131"></a>00131         {
<a name="l00132"></a>00132                 <a class="code" href="class_critical_section.html#a509be5342b2f07ae06e1af5d9e08b871" title="Take control of critical section.">Enter</a>();
<a name="l00133"></a>00133                         <span class="keywordtype">object</span> = paraObject;
<a name="l00134"></a>00134                 <a class="code" href="class_critical_section.html#a6fa0931385f066492f31fc98e3fca657" title="Release control of critical section.">Leave</a>();
<a name="l00135"></a>00135         }
<a name="l00136"></a>00136 
<a name="l00142"></a><a class="code" href="class_concurrent_object.html#a08c2689b30ec91e48396101a64fcca4d">00142</a>         <span class="keywordtype">void</span> <a class="code" href="class_concurrent_object.html#a08c2689b30ec91e48396101a64fcca4d" title="Safely decreases protected object by specified amount.">ConcurrentObject::Decrease</a>(<span class="keywordtype">int</span> amount)
<a name="l00143"></a>00143         {
<a name="l00144"></a>00144                 <a class="code" href="class_critical_section.html#a509be5342b2f07ae06e1af5d9e08b871" title="Take control of critical section.">Enter</a>();
<a name="l00145"></a>00145                         <span class="keywordtype">object</span>-=amount;
<a name="l00146"></a>00146                 <a class="code" href="class_critical_section.html#a6fa0931385f066492f31fc98e3fca657" title="Release control of critical section.">Leave</a>();
<a name="l00147"></a>00147         }
<a name="l00148"></a>00148 
<a name="l00154"></a><a class="code" href="class_concurrent_object.html#aa144f004cedf93c76d28c992a0ae9026">00154</a>         <span class="keywordtype">void</span> <a class="code" href="class_concurrent_object.html#aa144f004cedf93c76d28c992a0ae9026" title="Safely increases protected object by specified amount.">ConcurrentObject::Increase</a>(<span class="keywordtype">int</span> amount)
<a name="l00155"></a>00155         {
<a name="l00156"></a>00156                 <a class="code" href="class_critical_section.html#a509be5342b2f07ae06e1af5d9e08b871" title="Take control of critical section.">Enter</a>();
<a name="l00157"></a>00157                         <span class="keywordtype">object</span>+=amount;
<a name="l00158"></a>00158                 <a class="code" href="class_critical_section.html#a6fa0931385f066492f31fc98e3fca657" title="Release control of critical section.">Leave</a>();
<a name="l00159"></a>00159         }
<a name="l00160"></a>00160 
<a name="l00166"></a><a class="code" href="class_concurrent_object.html#a671350eedb2a56a14c4f10023d7b4ae9">00166</a>         T <a class="code" href="class_concurrent_object.html#a671350eedb2a56a14c4f10023d7b4ae9" title="Retrieves copy of protected object.">ConcurrentObject::Get</a>()<span class="keyword"> const</span>
<a name="l00167"></a>00167 <span class="keyword">        </span>{
<a name="l00168"></a>00168                 T returnMe;
<a name="l00169"></a>00169 
<a name="l00170"></a>00170                 <a class="code" href="class_critical_section.html#a509be5342b2f07ae06e1af5d9e08b871" title="Take control of critical section.">Enter</a>();
<a name="l00171"></a>00171                         returnMe = <a class="code" href="class_concurrent_object.html#a4ad66e44437b84b0ec7fd9d479a8300f" title="Object that is protected by critical section.">object</a>;
<a name="l00172"></a>00172                 <a class="code" href="class_critical_section.html#a6fa0931385f066492f31fc98e3fca657" title="Release control of critical section.">Leave</a>();
<a name="l00173"></a>00173 
<a name="l00174"></a>00174                 <span class="keywordflow">return</span>(returnMe);
<a name="l00175"></a>00175         }
<a name="l00176"></a>00176 
<a name="l00182"></a><a class="code" href="class_concurrent_object.html#a2e40c00b19595d7816ff3e8020b1594d">00182</a>         <span class="keywordtype">void</span> <a class="code" href="class_concurrent_object.html#a2e40c00b19595d7816ff3e8020b1594d" title="Retrieves copy of protected object.">ConcurrentObject::GetB</a>(T &amp; destination)
<a name="l00183"></a>00183         {
<a name="l00184"></a>00184                 <a class="code" href="class_critical_section.html#a509be5342b2f07ae06e1af5d9e08b871" title="Take control of critical section.">Enter</a>();
<a name="l00185"></a>00185                         destination = <a class="code" href="class_concurrent_object.html#a4ad66e44437b84b0ec7fd9d479a8300f" title="Object that is protected by critical section.">object</a>;
<a name="l00186"></a>00186                 <a class="code" href="class_critical_section.html#a6fa0931385f066492f31fc98e3fca657" title="Release control of critical section.">Leave</a>();
<a name="l00187"></a>00187         }
<a name="l00188"></a>00188 
<a name="l00198"></a><a class="code" href="class_concurrent_object.html#a1ef50fdbaf6004708adfd80aa54f4dd6">00198</a>         T * <a class="code" href="class_concurrent_object.html#a1ef50fdbaf6004708adfd80aa54f4dd6" title="Retrieves mutable pointer to protected object, which is not thread safe.">ConcurrentObject::GetPtr</a>()
<a name="l00199"></a>00199         {
<a name="l00200"></a>00200                 <span class="keywordflow">return</span>(&amp;<span class="keywordtype">object</span>);
<a name="l00201"></a>00201         }
<a name="l00202"></a>00202 
<a name="l00213"></a><a class="code" href="class_concurrent_object.html#a6cd29463e8fbdb1ec7bcb7df6fc5a598">00213</a>         <span class="keyword">const</span> T * <a class="code" href="class_concurrent_object.html#a6cd29463e8fbdb1ec7bcb7df6fc5a598" title="Retrieves constant pointer to protected object, which is not thread safe.">ConcurrentObject::GetPtrConst</a>()
<a name="l00214"></a>00214         {
<a name="l00215"></a>00215                 <span class="keywordflow">return</span>(&amp;<span class="keywordtype">object</span>);
<a name="l00216"></a>00216         }
<a name="l00217"></a>00217 
<a name="l00225"></a><a class="code" href="class_concurrent_object.html#afcaf1c2ecea8ff0b58db40194e1424ef">00225</a>         <span class="keywordtype">void</span> <a class="code" href="class_concurrent_object.html#afcaf1c2ecea8ff0b58db40194e1424ef" title="Sets the specified bit of the protected object to on.">ConcurrentObject::BitOn</a>(<span class="keywordtype">size_t</span> bitNumber)
<a name="l00226"></a>00226         {
<a name="l00227"></a>00227                 _ErrorException((bitNumber &gt; <span class="keyword">sizeof</span>(T)),<span class="stringliteral">&quot;attempting to signal object&#39;s bit to on, bitNumber is too high&quot;</span>,0,__LINE__,__FILE__);
<a name="l00228"></a>00228                 <a class="code" href="class_critical_section.html#a509be5342b2f07ae06e1af5d9e08b871" title="Take control of critical section.">Enter</a>();
<a name="l00229"></a>00229                         BIT_ON(<span class="keywordtype">object</span>,bitNumber);
<a name="l00230"></a>00230                 <a class="code" href="class_critical_section.html#a6fa0931385f066492f31fc98e3fca657" title="Release control of critical section.">Leave</a>();
<a name="l00231"></a>00231         }
<a name="l00232"></a>00232 
<a name="l00240"></a><a class="code" href="class_concurrent_object.html#a97cf35fb4e3e7b59b3a7b83f7aaad5cb">00240</a>         <span class="keywordtype">void</span> <a class="code" href="class_concurrent_object.html#a97cf35fb4e3e7b59b3a7b83f7aaad5cb" title="Sets the specified bit of the protected object to off.">ConcurrentObject::BitOff</a>(<span class="keywordtype">size_t</span> bitNumber)
<a name="l00241"></a>00241         {
<a name="l00242"></a>00242                 _ErrorException((bitNumber &gt; <span class="keyword">sizeof</span>(T)),<span class="stringliteral">&quot;attempting to signal object&#39;s bit to off, bitNumber is too high&quot;</span>,0,__LINE__,__FILE__);
<a name="l00243"></a>00243                 <a class="code" href="class_critical_section.html#a509be5342b2f07ae06e1af5d9e08b871" title="Take control of critical section.">Enter</a>();
<a name="l00244"></a>00244                         BIT_OFF(<span class="keywordtype">object</span>,bitNumber);
<a name="l00245"></a>00245                 <a class="code" href="class_critical_section.html#a6fa0931385f066492f31fc98e3fca657" title="Release control of critical section.">Leave</a>();
<a name="l00246"></a>00246         }
<a name="l00247"></a>00247 
<a name="l00255"></a><a class="code" href="class_concurrent_object.html#a2d4cb6575506a160c4f86d98d1c5e0a7">00255</a>         <span class="keywordtype">void</span> <a class="code" href="class_concurrent_object.html#a2d4cb6575506a160c4f86d98d1c5e0a7" title="Toggles the specified bit of the protected object.">ConcurrentObject::BitToggle</a>(<span class="keywordtype">size_t</span> bitNumber)
<a name="l00256"></a>00256         {
<a name="l00257"></a>00257                 _ErrorException((bitNumber &gt; <span class="keyword">sizeof</span>(T)),<span class="stringliteral">&quot;attempting to toggle object&#39;s bit, bitNumber is too high&quot;</span>,0,__LINE__,__FILE__);
<a name="l00258"></a>00258                 <a class="code" href="class_critical_section.html#a509be5342b2f07ae06e1af5d9e08b871" title="Take control of critical section.">Enter</a>();
<a name="l00259"></a>00259                         BIT_TOGGLE(<span class="keywordtype">object</span>,bitNumber);
<a name="l00260"></a>00260                 <a class="code" href="class_critical_section.html#a6fa0931385f066492f31fc98e3fca657" title="Release control of critical section.">Leave</a>();
<a name="l00261"></a>00261         }
<a name="l00262"></a>00262 
<a name="l00271"></a><a class="code" href="class_concurrent_object.html#a06cf9224d2a23979055560bf12c02c7f">00271</a>         <span class="keywordtype">bool</span> <a class="code" href="class_concurrent_object.html#a06cf9224d2a23979055560bf12c02c7f" title="Retrieves the specified bit of the protected object.">ConcurrentObject::BitGet</a>(<span class="keywordtype">size_t</span> bitNumber)<span class="keyword"> const</span>
<a name="l00272"></a>00272 <span class="keyword">        </span>{
<a name="l00273"></a>00273                 _ErrorException((bitNumber &gt; <span class="keyword">sizeof</span>(T)),<span class="stringliteral">&quot;attempting to retrieve object&#39;s bit, bitNumber is too high&quot;</span>,0,__LINE__,__FILE__);
<a name="l00274"></a>00274                 <span class="keywordtype">bool</span> bReturn = <span class="keyword">false</span>;
<a name="l00275"></a>00275                 <a class="code" href="class_critical_section.html#a509be5342b2f07ae06e1af5d9e08b871" title="Take control of critical section.">Enter</a>();
<a name="l00276"></a>00276                         bReturn = BIT_GET(<span class="keywordtype">object</span>,bitNumber);
<a name="l00277"></a>00277                 <a class="code" href="class_critical_section.html#a6fa0931385f066492f31fc98e3fca657" title="Release control of critical section.">Leave</a>();
<a name="l00278"></a>00278 
<a name="l00279"></a>00279                 <span class="keywordflow">return</span>(bReturn);
<a name="l00280"></a>00280         }
<a name="l00281"></a>00281 
<a name="l00287"></a><a class="code" href="class_concurrent_object.html#a9890ec2fff5e177bf3575d11d6a164f5">00287</a>         <a class="code" href="class_concurrent_object.html" title="Uses CriticalSection to safely control access to an object.">ConcurrentObject</a> * Clone()<span class="keyword"> const</span>
<a name="l00288"></a>00288 <span class="keyword">        </span>{
<a name="l00289"></a>00289                 <a class="code" href="class_concurrent_object.html" title="Uses CriticalSection to safely control access to an object.">ConcurrentObject</a> * returnMe = NULL;
<a name="l00290"></a>00290                 Enter();
<a name="l00291"></a>00291                         returnMe = <span class="keyword">new</span> (nothrow) <a class="code" href="class_concurrent_object.html" title="Uses CriticalSection to safely control access to an object.">ConcurrentObject</a>(*<span class="keyword">this</span>);
<a name="l00292"></a>00292                 Leave();
<a name="l00293"></a>00293                 <a class="code" href="namespace_utility.html#ae9b88a37dc2e95519c938e673dd3de2c" title="Checks that memory was successfully allocated to a pointer.">Utility::DynamicAllocCheck</a>(returnMe,__LINE__,__FILE__);
<a name="l00294"></a>00294 
<a name="l00295"></a>00295                 <span class="keywordflow">return</span> returnMe;
<a name="l00296"></a>00296         }
<a name="l00297"></a>00297 
<a name="l00305"></a><a class="code" href="class_concurrent_object.html#accf05dbac146e8d6a87d1efa541eac42">00305</a>         <span class="keyword">static</span> <span class="keywordtype">bool</span> TestClass()
<a name="l00306"></a>00306         {
<a name="l00307"></a>00307                 cout &lt;&lt; <span class="stringliteral">&quot;Testing ConcurrentObject class...\n&quot;</span>;
<a name="l00308"></a>00308                 <span class="keywordtype">bool</span> problem = <span class="keyword">false</span>;
<a name="l00309"></a>00309 
<a name="l00310"></a>00310                 {
<a name="l00311"></a>00311                         cout &lt;&lt; <span class="stringliteral">&quot;Running threads\n&quot;</span>;
<a name="l00312"></a>00312 
<a name="l00313"></a>00313                         <span class="keywordtype">int</span> integer = 5000;
<a name="l00314"></a>00314                         <a class="code" href="class_concurrent_object.html" title="Uses CriticalSection to safely control access to an object.">ConcurrentObject&lt;int*&gt;</a> co(&amp;integer);
<a name="l00315"></a>00315 
<a name="l00316"></a>00316                         <span class="comment">// Create group of threads</span>
<a name="l00317"></a>00317                         <span class="keyword">const</span> <span class="keywordtype">size_t</span> numThreads = 5;
<a name="l00318"></a>00318 
<a name="l00319"></a>00319                         <a class="code" href="class_thread_single_group.html" title="Manages a group of ThreadSingle objects.">ThreadSingleGroup</a> threads;
<a name="l00320"></a>00320 
<a name="l00321"></a>00321                         <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> n = 0;n&lt;numThreads;n++)
<a name="l00322"></a>00322                         {
<a name="l00323"></a>00323                                 threads.<a class="code" href="class_store_vector.html#a2c946161d0ec3f96aa023bd8d22bc5af" title="Add object to back of vector.">Add</a>(<span class="keyword">new</span> <a class="code" href="class_thread_single.html" title="A single thread, the thread&amp;#39;s life time is the life time of this object.">ThreadSingle</a>(&amp;ConcurrentObjectTestFunction,&amp;co,<span class="keyword">false</span>));
<a name="l00324"></a>00324                         }
<a name="l00325"></a>00325 
<a name="l00326"></a>00326                         <span class="comment">// Wait for threads to exit</span>
<a name="l00327"></a>00327                         threads.<a class="code" href="class_thread_single_group.html#a69112aa6762e363d3b8c07ff713a8198" title="Does not return until all threads have exited.">WaitForThreadsToExit</a>();
<a name="l00328"></a>00328 
<a name="l00329"></a>00329                         <span class="comment">// Total up return value</span>
<a name="l00330"></a>00330                         <span class="keywordtype">size_t</span> total = 0;
<a name="l00331"></a>00331                         <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> n = 0;n&lt;numThreads;n++)
<a name="l00332"></a>00332                         {
<a name="l00333"></a>00333                                 total += threads[n].GetExitCode();
<a name="l00334"></a>00334                                 cout &lt;&lt; <span class="stringliteral">&quot;Count for thread &quot;</span> &lt;&lt; n &lt;&lt; <span class="stringliteral">&quot; is &quot;</span> &lt;&lt; threads[n].GetExitCode() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
<a name="l00335"></a>00335                         }
<a name="l00336"></a>00336 
<a name="l00337"></a>00337                         cout &lt;&lt; <span class="stringliteral">&quot;Total: &quot;</span> &lt;&lt; total &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
<a name="l00338"></a>00338                 }
<a name="l00339"></a>00339 
<a name="l00340"></a>00340                 {
<a name="l00341"></a>00341                         <a class="code" href="class_concurrent_object.html">ConcurrentObject&lt;size_t&gt;</a> co;
<a name="l00342"></a>00342                         co.<a class="code" href="class_concurrent_object.html#afa3d2932ed3b805db27ac22eee4a955d" title="Changes contents of protected object, by copying data from a temporary object.">Set</a>(0);
<a name="l00343"></a>00343 
<a name="l00344"></a>00344                         <span class="comment">// Test Increase()</span>
<a name="l00345"></a>00345                         co.<a class="code" href="class_concurrent_object.html#aa144f004cedf93c76d28c992a0ae9026" title="Safely increases protected object by specified amount.">Increase</a>(10);
<a name="l00346"></a>00346 
<a name="l00347"></a>00347                         <span class="keywordflow">if</span>(co.<a class="code" href="class_concurrent_object.html#a671350eedb2a56a14c4f10023d7b4ae9" title="Retrieves copy of protected object.">Get</a>() != 10)
<a name="l00348"></a>00348                         {
<a name="l00349"></a>00349                                 cout &lt;&lt; <span class="stringliteral">&quot;Increase is bad\n&quot;</span>;
<a name="l00350"></a>00350                                 problem = <span class="keyword">true</span>;
<a name="l00351"></a>00351                         }
<a name="l00352"></a>00352                         <span class="keywordflow">else</span>
<a name="l00353"></a>00353                         {
<a name="l00354"></a>00354                                 cout &lt;&lt; <span class="stringliteral">&quot;Increase is good\n&quot;</span>;
<a name="l00355"></a>00355                         }
<a name="l00356"></a>00356 
<a name="l00357"></a>00357                         <span class="comment">// Test Decrease()</span>
<a name="l00358"></a>00358                         co.<a class="code" href="class_concurrent_object.html#a08c2689b30ec91e48396101a64fcca4d" title="Safely decreases protected object by specified amount.">Decrease</a>(5);
<a name="l00359"></a>00359 
<a name="l00360"></a>00360                         <span class="keywordflow">if</span>(co.<a class="code" href="class_concurrent_object.html#a671350eedb2a56a14c4f10023d7b4ae9" title="Retrieves copy of protected object.">Get</a>() != 5)
<a name="l00361"></a>00361                         {
<a name="l00362"></a>00362                                 cout &lt;&lt; <span class="stringliteral">&quot;Decrease is bad\n&quot;</span>;
<a name="l00363"></a>00363                                 problem = <span class="keyword">true</span>;
<a name="l00364"></a>00364                         }
<a name="l00365"></a>00365                         <span class="keywordflow">else</span>
<a name="l00366"></a>00366                         {
<a name="l00367"></a>00367                                 cout &lt;&lt; <span class="stringliteral">&quot;Decrease is good\n&quot;</span>;
<a name="l00368"></a>00368                         }
<a name="l00369"></a>00369 
<a name="l00370"></a>00370                         co.<a class="code" href="class_concurrent_object.html#afa3d2932ed3b805db27ac22eee4a955d" title="Changes contents of protected object, by copying data from a temporary object.">Set</a>(0);
<a name="l00371"></a>00371 
<a name="l00372"></a>00372                         <span class="comment">// Test BitOn()</span>
<a name="l00373"></a>00373                         co.<a class="code" href="class_concurrent_object.html#afcaf1c2ecea8ff0b58db40194e1424ef" title="Sets the specified bit of the protected object to on.">BitOn</a>(2);
<a name="l00374"></a>00374                         <span class="keywordflow">if</span>(co.<a class="code" href="class_concurrent_object.html#a06cf9224d2a23979055560bf12c02c7f" title="Retrieves the specified bit of the protected object.">BitGet</a>(2) != <span class="keyword">true</span>)
<a name="l00375"></a>00375                         {
<a name="l00376"></a>00376                                 cout &lt;&lt; <span class="stringliteral">&quot;BitOn or BitGet is bad\n&quot;</span>;
<a name="l00377"></a>00377                                 problem = <span class="keyword">true</span>;
<a name="l00378"></a>00378                         }
<a name="l00379"></a>00379                         <span class="keywordflow">else</span>
<a name="l00380"></a>00380                         {
<a name="l00381"></a>00381                                 cout &lt;&lt; <span class="stringliteral">&quot;BitOn and BitGet are good\n&quot;</span>;
<a name="l00382"></a>00382                         }
<a name="l00383"></a>00383 
<a name="l00384"></a>00384                         <span class="comment">// Test BitOff()</span>
<a name="l00385"></a>00385                         co.<a class="code" href="class_concurrent_object.html#a97cf35fb4e3e7b59b3a7b83f7aaad5cb" title="Sets the specified bit of the protected object to off.">BitOff</a>(2);
<a name="l00386"></a>00386                         <span class="keywordflow">if</span>(co.<a class="code" href="class_concurrent_object.html#a06cf9224d2a23979055560bf12c02c7f" title="Retrieves the specified bit of the protected object.">BitGet</a>(2) != <span class="keyword">false</span>)
<a name="l00387"></a>00387                         {
<a name="l00388"></a>00388                                 cout &lt;&lt; <span class="stringliteral">&quot;BitOff or BitGet is bad\n&quot;</span>;
<a name="l00389"></a>00389                                 problem = <span class="keyword">true</span>;
<a name="l00390"></a>00390                         }
<a name="l00391"></a>00391                         <span class="keywordflow">else</span>
<a name="l00392"></a>00392                         {
<a name="l00393"></a>00393                                 cout &lt;&lt; <span class="stringliteral">&quot;BitOff and BitGet are good\n&quot;</span>;
<a name="l00394"></a>00394                         }
<a name="l00395"></a>00395 
<a name="l00396"></a>00396                         <span class="comment">// Test BitToggle()</span>
<a name="l00397"></a>00397                         co.<a class="code" href="class_concurrent_object.html#a2d4cb6575506a160c4f86d98d1c5e0a7" title="Toggles the specified bit of the protected object.">BitToggle</a>(2);
<a name="l00398"></a>00398                         <span class="keywordflow">if</span>(co.<a class="code" href="class_concurrent_object.html#a06cf9224d2a23979055560bf12c02c7f" title="Retrieves the specified bit of the protected object.">BitGet</a>(2) != <span class="keyword">true</span>)
<a name="l00399"></a>00399                         {
<a name="l00400"></a>00400                                 cout &lt;&lt; <span class="stringliteral">&quot;BitToggle or BitGet is bad\n&quot;</span>;
<a name="l00401"></a>00401                                 problem = <span class="keyword">true</span>;
<a name="l00402"></a>00402                         }
<a name="l00403"></a>00403                         <span class="keywordflow">else</span>
<a name="l00404"></a>00404                         {
<a name="l00405"></a>00405                                 cout &lt;&lt; <span class="stringliteral">&quot;BitToggle and BitGet are good\n&quot;</span>;
<a name="l00406"></a>00406                         }
<a name="l00407"></a>00407 
<a name="l00408"></a>00408                         <span class="comment">// Test BitToggle()</span>
<a name="l00409"></a>00409                         co.<a class="code" href="class_concurrent_object.html#a2d4cb6575506a160c4f86d98d1c5e0a7" title="Toggles the specified bit of the protected object.">BitToggle</a>(2);
<a name="l00410"></a>00410                         <span class="keywordflow">if</span>(co.<a class="code" href="class_concurrent_object.html#a06cf9224d2a23979055560bf12c02c7f" title="Retrieves the specified bit of the protected object.">BitGet</a>(2) != <span class="keyword">false</span>)
<a name="l00411"></a>00411                         {
<a name="l00412"></a>00412                                 cout &lt;&lt; <span class="stringliteral">&quot;BitToggle or BitGet is bad\n&quot;</span>;
<a name="l00413"></a>00413                                 problem = <span class="keyword">true</span>;
<a name="l00414"></a>00414                         }
<a name="l00415"></a>00415                         <span class="keywordflow">else</span>
<a name="l00416"></a>00416                         {
<a name="l00417"></a>00417                                 cout &lt;&lt; <span class="stringliteral">&quot;BitToggle and BitGet are good\n&quot;</span>;
<a name="l00418"></a>00418                         }
<a name="l00419"></a>00419 
<a name="l00420"></a>00420                         <a class="code" href="class_concurrent_object.html">ConcurrentObject&lt;size_t&gt;</a> copyOfCo(co);
<a name="l00421"></a>00421                         <span class="keywordflow">if</span>(co != copyOfCo)
<a name="l00422"></a>00422                         {
<a name="l00423"></a>00423                                 cout &lt;&lt; <span class="stringliteral">&quot;Copy constructor or equality operator is bad\n&quot;</span>;
<a name="l00424"></a>00424                                 problem = <span class="keyword">true</span>;
<a name="l00425"></a>00425                         }
<a name="l00426"></a>00426                         <span class="keywordflow">else</span>
<a name="l00427"></a>00427                         {
<a name="l00428"></a>00428                                 cout &lt;&lt; <span class="stringliteral">&quot;Copy constructor and equality operator are good\n&quot;</span>;
<a name="l00429"></a>00429                         }
<a name="l00430"></a>00430 
<a name="l00431"></a>00431                         <a class="code" href="class_concurrent_object.html">ConcurrentObject&lt;size_t&gt;</a> copyOfCo2;
<a name="l00432"></a>00432                         copyOfCo2 = co;
<a name="l00433"></a>00433                         <span class="keywordflow">if</span>(co != copyOfCo2)
<a name="l00434"></a>00434                         {
<a name="l00435"></a>00435                                 cout &lt;&lt; <span class="stringliteral">&quot;Assignment operator or equality operator is bad\n&quot;</span>;
<a name="l00436"></a>00436                                 problem = <span class="keyword">true</span>;
<a name="l00437"></a>00437                         }
<a name="l00438"></a>00438                         <span class="keywordflow">else</span>
<a name="l00439"></a>00439                         {
<a name="l00440"></a>00440                                 cout &lt;&lt; <span class="stringliteral">&quot;Assignment operator and equality operator are good\n&quot;</span>;
<a name="l00441"></a>00441                         }
<a name="l00442"></a>00442                 }
<a name="l00443"></a>00443 
<a name="l00444"></a>00444                 
<a name="l00445"></a>00445                 cout &lt;&lt; <span class="stringliteral">&quot;\n\n&quot;</span>;
<a name="l00446"></a>00446                 <span class="keywordflow">return</span> !problem;
<a name="l00447"></a>00447         }
<a name="l00448"></a>00448 
<a name="l00449"></a>00449 
<a name="l00450"></a>00450 };
<a name="l00451"></a>00451 
<a name="l00452"></a>00452 <span class="keyword">extern</span> <a class="code" href="class_concurrent_object.html" title="Uses CriticalSection to safely control access to an object.">ConcurrentObject&lt;int&gt;</a> ErrorMode;
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Sat Sep 25 2010 22:10:14 for DarkNet by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
