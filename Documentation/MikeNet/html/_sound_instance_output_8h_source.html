<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DarkNet: C:/Users/Michael Pryor/Documents/Programming 09/MikeNet/Project/MikeNet/SoundInstanceOutput.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>C:/Users/Michael Pryor/Documents/Programming 09/MikeNet/Project/MikeNet/SoundInstanceOutput.h</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#pragma once</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span>
<a name="l00007"></a><a class="code" href="class_sound_instance_output.html">00007</a> <span class="keyword">class </span><a class="code" href="class_sound_instance_output.html" title="Output instance which accesses an output device and sends output to it.">SoundInstanceOutput</a> : <span class="keyword">public</span> <a class="code" href="class_sound_instance.html" title="Base class for any type of sound instance.">SoundInstance</a>
<a name="l00008"></a>00008 {
<a name="l00009"></a>00009         <span class="comment">// Load/unload waveform buffer</span>
<a name="l00010"></a>00010         <span class="keywordtype">void</span> <a class="code" href="class_sound_instance_output.html#a0c44802de559d280a15ad66fc0fa4df6" title="Unprepares buffer.">UnprepareBuffer</a>(LPWAVEHDR wavehdr);
<a name="l00011"></a>00011         <span class="keywordtype">void</span> <a class="code" href="class_sound_instance_output.html#a5fb6653bf1a496ef1029d5db55bf197f" title="Queues a buffer ready to receive input data.">QueueBuffer</a>(LPWAVEHDR wavehdr);
<a name="l00012"></a>00012 
<a name="l00016"></a><a class="code" href="class_sound_instance_output.html#a90f2a74c4dd6f63b21d5252325ed590d">00016</a>         HWAVEOUT <a class="code" href="class_sound_instance_output.html#a90f2a74c4dd6f63b21d5252325ed590d" title="Controls device.">device</a>;
<a name="l00017"></a>00017 
<a name="l00021"></a><a class="code" href="class_sound_instance_output.html#ad8422553602e12785eab486a27796da3">00021</a>         <a class="code" href="class_store_queue.html">StoreQueue&lt;Packet&gt;</a> <a class="code" href="class_sound_instance_output.html#ad8422553602e12785eab486a27796da3" title="Stores data that will be output.">outputData</a>;
<a name="l00022"></a>00022 
<a name="l00028"></a><a class="code" href="class_sound_instance_output.html#a4bb8e2de55d954056ed896e0d029bab4">00028</a>         <a class="code" href="class_timer.html" title="Timer object used to repeat an action every x number of milliseconds.">Timer</a> <a class="code" href="class_sound_instance_output.html#a4bb8e2de55d954056ed896e0d029bab4" title="Monitors when data was last added to SoundInstanceOutput::outputData.">outputDataLastAdded</a>;
<a name="l00029"></a>00029 
<a name="l00035"></a><a class="code" href="class_sound_instance_output.html#ac3f6a1350dd4cb7960ec0dafbb0d7b45">00035</a>         <span class="keywordtype">size_t</span> <a class="code" href="class_sound_instance_output.html#ac3f6a1350dd4cb7960ec0dafbb0d7b45" title="Total number of bytes in SoundInstanceOutput::outputData queue.">outputDataTotalBytes</a>;
<a name="l00036"></a>00036         
<a name="l00042"></a><a class="code" href="class_sound_instance_output.html#acaa4c6f3eca8eddea6cfd289d07a0124">00042</a>         <span class="keywordtype">size_t</span> <a class="code" href="class_sound_instance_output.html#acaa4c6f3eca8eddea6cfd289d07a0124" title="If SoundInstanceOutput::outputDataTotalBytes &amp;gt;= this then data will be played.">outputDataTotalBytesCap</a>;
<a name="l00043"></a>00043         
<a name="l00049"></a><a class="code" href="class_sound_instance_output.html#a3b7132b8d865398f9b37ed6a715b3855">00049</a>         <span class="keywordtype">size_t</span> <a class="code" href="class_sound_instance_output.html#a3b7132b8d865398f9b37ed6a715b3855" title="Amount of data in milliseconds that must be stored before data is played.">outputDataTotalTimeCap</a>;
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="keyword">public</span>:
<a name="l00055"></a><a class="code" href="class_sound_instance_output.html#ae12e8c17801490274100001a1e94f636">00055</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="class_sound_instance_output.html#ae12e8c17801490274100001a1e94f636" title="Default value for SoundInstanceOutput::outputDataLastAddedCap in milliseconds.">DEFAULT_TIME_SINCE_LAST_ADDED_CAP</a> = 200;
<a name="l00056"></a>00056 
<a name="l00060"></a><a class="code" href="class_sound_instance_output.html#a701428cfaa968358f75f9be38b86753c">00060</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="class_sound_instance_output.html#a701428cfaa968358f75f9be38b86753c" title="Default value for SoundInstanceOutput::outputDataTotalTimeCap in milliseconds.">DEFAULT_TIME_STORED_CAP</a> = 500;
<a name="l00061"></a>00061 <span class="keyword">private</span>:
<a name="l00065"></a><a class="code" href="class_sound_instance_output.html#a6f868bc7e7610066ccb2ff8616a2ab4a">00065</a>         <a class="code" href="class_sound_format.html" title="Format of sound, describing samples per second, bits per sample and number of channels.">SoundFormat</a> <a class="code" href="class_sound_instance_output.html#a6f868bc7e7610066ccb2ff8616a2ab4a" title="Sound format in use.">format</a>;
<a name="l00066"></a>00066 
<a name="l00070"></a><a class="code" href="class_sound_instance_output.html#a553a1bf408082e6d98f1472f60c014bf">00070</a>         <a class="code" href="class_concurrent_object.html">ConcurrentObject&lt;size_t&gt;</a> <a class="code" href="class_sound_instance_output.html#a553a1bf408082e6d98f1472f60c014bf" title="Number of buffers currently in use by waveform or the thread.">bufferInUseCount</a>;
<a name="l00071"></a>00071         
<a name="l00077"></a><a class="code" href="class_sound_instance_output.html#a6c22559d4c8c6f04ee92cf6763a8493f">00077</a>         <span class="keyword">static</span> <a class="code" href="class_store_vector.html">StoreVector&lt;SoundInstanceOutput*&gt;</a> <a class="code" href="class_sound_instance_output.html#a6c22559d4c8c6f04ee92cf6763a8493f" title="Stores a pointer to all instances of SoundInstanceOutput.">instanceOutputList</a>;
<a name="l00078"></a>00078 
<a name="l00084"></a><a class="code" href="class_sound_instance_output.html#af1ad50da6639146c3b0ef782bd4737ab">00084</a>         <span class="keyword">static</span> <a class="code" href="class_thread_single.html" title="A single thread, the thread&amp;#39;s life time is the life time of this object.">ThreadSingle</a> * <a class="code" href="class_sound_instance_output.html#af1ad50da6639146c3b0ef782bd4737ab" title="Thread which manages output, deciding when buffers should be output.">instanceOutputThread</a>;
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 <span class="keyword">public</span>:
<a name="l00087"></a>00087         <span class="keyword">static</span> <a class="code" href="class_sound_instance_output.html" title="Output instance which accesses an output device and sends output to it.">SoundInstanceOutput</a> * <a class="code" href="class_sound_instance_output.html#ac2bb9217f9e53a6a6cb44db494be9b20" title="Retrieves an output instance.">GetInstanceOutput</a>(<span class="keywordtype">size_t</span> instanceID);
<a name="l00088"></a>00088         <span class="keyword">static</span> <span class="keywordtype">size_t</span> <a class="code" href="class_sound_instance_output.html#a131d7aa967c299fe1ec72803b846ff71" title="Retrieves the number of output instance initialized.">GetNumInstanceOutput</a>();
<a name="l00089"></a>00089         <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_sound_instance_output.html#a2f2417585c5877d49a3483db773b5d8d" title="Take control of SoundInstanceOutput::instanceOutputList.">EnterInstanceOutputList</a>();
<a name="l00090"></a>00090         <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_sound_instance_output.html#a05e8c0dc8a6df890a35311d3bee471ee" title="Release control of SoundInstanceOutput::instanceOutputList.">LeaveInstanceOutputList</a>();
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 
<a name="l00093"></a>00093         <a class="code" href="class_sound_instance_output.html#a85e36931e8ce76829bdc92a2232a9d60" title="Constructor.">SoundInstanceOutput</a>(<span class="keywordtype">size_t</span> msStoredDataCap, <span class="keywordtype">size_t</span> timeGapCap, <span class="keyword">const</span> <a class="code" href="class_sound_format.html" title="Format of sound, describing samples per second, bits per sample and number of channels.">SoundFormat</a> &amp; <a class="code" href="class_sound_instance_output.html#a6f868bc7e7610066ccb2ff8616a2ab4a" title="Sound format in use.">format</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> deviceID);
<a name="l00094"></a>00094         <a class="code" href="class_sound_instance_output.html#a4aa0679614c6830427fbc351aa652f4e" title="Destructor.">~SoundInstanceOutput</a>();
<a name="l00095"></a>00095 
<a name="l00096"></a>00096         <span class="keywordtype">void</span> <a class="code" href="class_sound_instance_output.html#aaa831c4469fe0211ca1950763f837ce4" title="Adds a packet to the output queue.">QueuePacket</a>(<a class="code" href="class_packet.html" title="Efficiently and safely stores and manipulates data.">Packet</a> * packet);
<a name="l00097"></a>00097         <span class="keywordtype">size_t</span> <a class="code" href="class_sound_instance_output.html#a850fb81ed7d2c491a23bacdd097875d8" title="Retrieves a packet from the output queue.">DequeuePacket</a>();
<a name="l00098"></a>00098         <span class="keywordtype">void</span> <a class="code" href="class_sound_instance_output.html#af6616e6b3eeb69450a4f4933503aead4" title="Method may choose to output a packet, extracting it from the packet queue.">DecideWhetherToOutput</a>();
<a name="l00099"></a>00099 
<a name="l00100"></a>00100         <span class="keywordtype">void</span> <a class="code" href="class_sound_instance_output.html#adfbfdd24496614e867f59488ba30ff68" title="Changes values which may effect how smooth playback is.">SetSmoothValues</a>(<span class="keywordtype">size_t</span> msStoredDataCap, <span class="keywordtype">size_t</span> timeGapCap);
<a name="l00101"></a>00101         <span class="keywordtype">size_t</span> <a class="code" href="class_sound_instance_output.html#ae353aa0ab31d014a92837f1e73ac9431" title="Retrieves the amount of data (in milliseconds) that needs to be stored for playback to commence...">GetStoredDataCapMs</a>() <span class="keyword">const</span>;
<a name="l00102"></a>00102         <span class="keywordtype">size_t</span> <a class="code" href="class_sound_instance_output.html#ac4b1b8ff9d46a64870217045b0e1e130" title="Retrieves the length of time for output not to be played without new output being added to the queue...">GetTimeGapCap</a>() <span class="keyword">const</span>;
<a name="l00103"></a>00103         <span class="keyword">const</span> <a class="code" href="class_sound_format.html" title="Format of sound, describing samples per second, bits per sample and number of channels.">SoundFormat</a> &amp; <a class="code" href="class_sound_instance_output.html#a31aa9bf9f48cccc959a3a8d5816a8591" title="Retrieves the sound format in use.">GetFormat</a>() <span class="keyword">const</span>;
<a name="l00104"></a>00104 
<a name="l00105"></a>00105         <span class="keywordtype">void</span> <a class="code" href="class_sound_instance_output.html#a97f2472e5d45949d6982c5a122f7c1bc" title="Changes the playback rate of sound output by accessing the device driver.">SetHardwarePlaybackRate</a>(<span class="keywordtype">double</span> Rate);
<a name="l00106"></a>00106         <span class="keywordtype">void</span> <a class="code" href="class_sound_instance_output.html#a946a43ebff38b07df949cd8a54e8f603" title="Changes the pitch of sound output by accessing the device driver.">SetHardwarePitch</a>(<span class="keywordtype">double</span> Pitch);
<a name="l00107"></a>00107         <span class="keywordtype">void</span> <a class="code" href="class_sound_instance_output.html#a03ff3cd14c4fe05faa8836938afd6d41" title="Changes the volume sound output by accessing the device driver.">SetHardwareVolume</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> Left, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> Right);
<a name="l00108"></a>00108         WORD <a class="code" href="class_sound_instance_output.html#a8592b296bc22bcf29d1761e21cada3ac" title="Retrieves the volume of the left channel.">GetHardwareVolumeLeft</a>();
<a name="l00109"></a>00109         WORD <a class="code" href="class_sound_instance_output.html#a746a2958ede4a31f948c084065fbb584" title="Retrieves the volume of the right channel.">GetHardwareVolumeRight</a>();
<a name="l00110"></a>00110         <span class="keywordtype">double</span> <a class="code" href="class_sound_instance_output.html#a1194a6299e5483aa8d0d03f9e130db37" title="Retrieves the pitch change in action by accessing the device driver.">GetHardwarePitch</a>();
<a name="l00111"></a>00111         <span class="keywordtype">double</span> <a class="code" href="class_sound_instance_output.html#add8e3702351c8a3874ebe3ebb5cc4ba1" title="Retrieves the playback rate of sound output by accessing the device driver.">GetHardwarePlaybackRate</a>();
<a name="l00112"></a>00112 
<a name="l00113"></a>00113         <span class="keywordtype">void</span> <a class="code" href="class_sound_instance_output.html#aab5f43bc2f2532543b8e0698c441d530" title="Called indirectly by callback thread to deal with a completed buffer after output process has finishe...">DealWithData</a>(WAVEHDR * buffer);
<a name="l00114"></a>00114         
<a name="l00115"></a>00115         <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_sound_instance_output.html#a52a29fc54172750e89d6d4e2f30075fb" title="Tests class.">TestClass</a>();
<a name="l00116"></a>00116 
<a name="l00117"></a>00117 };
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Sat Sep 25 2010 22:10:16 for DarkNet by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
