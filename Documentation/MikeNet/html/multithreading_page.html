<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DarkNet: Multithreaded Usage</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Multithreaded Usage </h1>  </div>
</div>
<div class="contents">
<p>This page explains how to use this API with multiple threads.<br/>
<br/>
</p>
<h2><a class="anchor" id="mtSockets"></a>
Sockets</h2>
<p>This section describes how <a class="el" href="class_net_socket_u_d_p.html" title="Socket used for UDP data transfer.">NetSocketUDP</a> and <a class="el" href="class_net_socket_t_c_p.html" title="Socket used for TCP data transfer.">NetSocketTCP</a> can be used safely.<br/>
<br/>
</p>
<p>You should set the socket up in one thread and not attempt to change socket options with multiple threads concurrently. Setting up includes any action taken before the socket is fully operational. After this you can initiate Send operations and manipulate the TCP or UDP mode using GetMode() concurrently. <br/>
<br/>
</p>
<p>Closing the socket must be done by only one thread and attempts should not be made by two threads to close the same socket. However, two different sockets may each be closed by a different thread. <br/>
<br/>
</p>
<p>All other commands (excluding those designed for internal use by the API itself e.g. Recv) can be used concurrently.<br/>
<br/>
</p>
<h2><a class="anchor" id="mtNetInstances"></a>
Networking Instances</h2>
<p>This section describes how <a class="el" href="class_net_instance_server.html" title="Server instance, designed to communicate with clients.">NetInstanceServer</a>, <a class="el" href="class_net_instance_client.html" title="Client instance, designed to communicate with servers.">NetInstanceClient</a> and clBroadcast state can be used safely.<br/>
<br/>
</p>
<p><a class="el" href="class_net_instance_server.html" title="Server instance, designed to communicate with clients.">NetInstanceServer</a>, <a class="el" href="class_net_instance_client.html" title="Client instance, designed to communicate with servers.">NetInstanceClient</a> and clBroadcastState can be used concurrently. Where a thread ID is required use <a class="el" href="class_net_utility.html#aca0bbea45a7bc232fdb88505f97cc016" title="Retrieves the thread ID associated with the main process.">NetUtility::GetMainProcessThreadID()</a>. Any threads using this ID will become synchronized and wait on each other where necessary.</p>
<p>Shutting down of an instance must take place in the main process. You do not need to worry about instances being deallocated while in use by the completion port because this can never happen. The socket destructors will ensure that the instance remains active until all send operations and receive operations have been completely dealt with.</p>
<h2><a class="anchor" id="mtProcedural"></a>
Procedural Commands</h2>
<p>All procedural commands are thread safe.<br/>
<br/>
</p>
<h2><a class="anchor" id="mtClasses"></a>
Concurrency Classes</h2>
<p>The following classes exist for concurrency purposes, and are used internally:</p>
<ul>
<li><a class="el" href="class_critical_section.html" title="Critical section class with Enter and Leave methods.">CriticalSection</a>.</li>
<li><a class="el" href="class_concurrency_control.html" title="Advanced concurrency control object.">ConcurrencyControl</a>.</li>
<li><a class="el" href="class_concurrency_control_simple.html" title="Simple version of ConcurrencyControl class which avoids the need for threadID parameters.">ConcurrencyControlSimple</a>.</li>
<li><a class="el" href="class_concurrent_object.html" title="Uses CriticalSection to safely control access to an object.">ConcurrentObject</a>. </li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Sat Sep 25 2010 22:10:16 for DarkNet by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
