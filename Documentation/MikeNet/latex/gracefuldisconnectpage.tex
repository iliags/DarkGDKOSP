Graceful disconnection allows clients to finish sending and receiving data before disconnecting. \hypertarget{gracefuldisconnectpage_howItWorks}{}\section{How it works}\label{gracefuldisconnectpage_howItWorks}
Below exact method/command names have been avoided because there are a number of ways of performing each operation depending on which part of the module you are interacting with. It should be clear however which method or command you should use for each operation. \par
\par


The below example shows a client disconnecting from a server, if the server wants to drop a client the process remains the same but with the roles reversed. \par
\par


Initially both the client and server are fully connected and the connection status is \hyperlink{classcl_networking_utility_a15dd34683154e07d5843f8f5432fec6da91a3fd8751354e5c4f32181268627d9f}{clNetworkingUtility::CONNECTED}.\par
 

If a client wants to disconnect, it should first initiate the graceful disconnection process by shutting the connection down using a Shutdown method/command. After this any attempt to initiate TCP send operations will fail. However, the client can still receive data as normal from the server. The TCP connection status will now return \hyperlink{classcl_networking_utility_a15dd34683154e07d5843f8f5432fec6dab8241425bb2dc77be7422346559bbb30}{clNetworkingUtility::NO\_\-SEND} on the client side and \hyperlink{classcl_networking_utility_a15dd34683154e07d5843f8f5432fec6daf36e05d04ad267b00184a32d654c3989}{clNetworkingUtility::NO\_\-RECV} on the server side. \par
 

Once the server has finished sending any remaining data it should shut the connection down using a Shutdown method/command. After this any further attempt to send to the client will fail. The TCP connection status will now return \hyperlink{classcl_networking_utility_a15dd34683154e07d5843f8f5432fec6da049f6833fe3ed9d08cfe5047078b73e3}{clNetworkingUtility::NO\_\-SEND\_\-RECV} on both the client and server side. Now any data left in the TCP packet queue on the client and server side can be extracted. Once the queue is empty the connection can be completely closed and the cleanup process begun. \par
  